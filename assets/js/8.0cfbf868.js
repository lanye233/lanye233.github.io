(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{239:function(s,a,n){"use strict";n.r(a);var e=n(0),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"长春轻轨web项目技术栈"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#长春轻轨web项目技术栈"}},[s._v("#")]),s._v(" 长春轻轨web项目技术栈")]),s._v(" "),n("h2",{attrs:{id:"一、运用框架、api"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、运用框架、api"}},[s._v("#")]),s._v(" 一、运用框架、API")]),s._v(" "),n("ul",[n("li",[s._v("Vue")]),s._v(" "),n("li",[s._v("Vuex")]),s._v(" "),n("li",[s._v("百度地图接口")]),s._v(" "),n("li",[s._v("element")])]),s._v(" "),n("h2",{attrs:{id:"二、项目结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、项目结构"}},[s._v("#")]),s._v(" 二、项目结构")]),s._v(" "),n("ul",[n("li",[s._v("布局\n"),n("ul",[n("li",[s._v("左侧百度地图接口")]),s._v(" "),n("li",[s._v("右侧垂直导航栏")])])]),s._v(" "),n("li",[s._v("功能\n"),n("ul",[n("li",[s._v("实时数据")]),s._v(" "),n("li",[s._v("视频数据")]),s._v(" "),n("li",[s._v("地图坐标查询")])])])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("├─components\n│ Aircondition.vue\n│ BaiduMap.vue\n│ Car.vue\n│ CurrentFault.vue\n│ DashBoard.vue //速度仪表盘\n│ Device.vue\n│ Door.vue\n│ Electric.vue\n│ FaultPage.vue\n│ History.vue\n│ HistoryFault.vue\n│ Interface.vue //弹出窗口主界面\n│ main.vue //入口文件\n│ Modal.vue\n│ Net.vue\n│ ProgressBar.vue //自定义双端进度条\n│ Video.vue\n│ WindowFrame.vue //弹出窗口\n│\n├─css\n│ demo.css\n│\n├─entity\n│ singleCar.js\n│ singleFault.js\n│\n├─router\n│ index.js\n│\n├─service\n│ AnalysisMsg.js //实时数据websocket连接所用函数\n│ WebSocket.js //实时数据websocket连接\n│ wfs.js //wfs连接视频端口，解码246流\n│\n└─store\n│ store.js //vuex管理状态\n│\n└─modules\nairStore.js\ncarStore.js\ndeviceStore.js\ndoorStore.js\nelectricStore.js\nfaultStore.js\nheadInfoStore.js\ninterfaceStore.js\nnetStore.js\nstateInfoStore.js\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br")])]),n("h2",{attrs:{id:"三、整体功能"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三、整体功能"}},[s._v("#")]),s._v(" 三、整体功能")]),s._v(" "),n("h3",{attrs:{id:"（1）、点击线路，出现线路所属车辆"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#（1）、点击线路，出现线路所属车辆"}},[s._v("#")]),s._v(" （1）、点击线路，出现线路所属车辆")]),s._v(" "),n("h4",{attrs:{id:"_1-车辆列表（总表和显示表）："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-车辆列表（总表和显示表）："}},[s._v("#")]),s._v(" 1.车辆列表（总表和显示表）：")]),s._v(" "),n("p",[s._v("var car_list = new Array(); "),n("em",[s._v("//车辆列表")])]),s._v(" "),n("p",[s._v("var show_list = new Array()")]),s._v(" "),n("p",[s._v("car_list[0] = new singleCar(1,8888)")]),s._v(" "),n("p",[s._v("car_list[1] = new singleCar(1,7777)")]),s._v(" "),n("p",[s._v("car_list[2] = new singleCar(2,6666)")]),s._v(" "),n("p",[s._v("car_list[3] = new singleCar(3,5555)")]),s._v(" "),n("p",[s._v("car_list[4] = new singleCar(3,4444)")]),s._v(" "),n("p",[s._v("car_list[5] = new singleCar(4,3333)")]),s._v(" "),n("h4",{attrs:{id:"_2-车辆实体："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-车辆实体："}},[s._v("#")]),s._v(" 2.车辆实体：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('//singleCar.js\nfunction singleCar(carLine, carNumber, mode) {\n  this.carLine = carLine\n  this.carNumber = carNumber\n  this.mode = "离线"\n}\nexport {\n  singleCar,\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h4",{attrs:{id:"_3-点击线路，将该线路车辆加入到显示列表："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-点击线路，将该线路车辆加入到显示列表："}},[s._v("#")]),s._v(" 3.点击线路，将该线路车辆加入到显示列表：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('getCars(i){\n  this.carLineIndex = i;\n  show_list.length = 0\n  this.setState()\n  console.log("--------------------------------------------------------------------选择线路:"+this.carLineIndex)\n  for(var j=0;j<car_list.length;j++){\n    if(car_list[j].carLine == i){\n      show_list.push(car_list[j])\n    }\n  }\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h4",{attrs:{id:"_4-点击具体车辆，检查车辆-mode，为运行时发送请求实时数据，并将车号-carnumber-传到新建小窗口页面："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-点击具体车辆，检查车辆-mode，为运行时发送请求实时数据，并将车号-carnumber-传到新建小窗口页面："}},[s._v("#")]),s._v(" 4.点击具体车辆，检查车辆 mode，为运行时发送请求实时数据，并将车号 carNumber 传到新建小窗口页面：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<el-submenu index="1">\n<template slot="title"><i class="el-icon-truck"></i>机车查询结果列表</template>\n<el-menu-item\nv-for="(item) in show_list"\nv-bind:key="item.carNumber"\n@click=" (item.mode == \'运行\') ? false:true && sendMessage(JSON.stringify({type:3,carNum:item.carNumber}))"\n@click.native="showOne(item.mode,item.carNumber)"\n>{{item.carNumber}}&nbsp;&nbsp;&nbsp;&nbsp;{{item.mode}}</el-menu-item>\n</el-submenu>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h3",{attrs:{id:"（2）、vuex-状态管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#（2）、vuex-状态管理"}},[s._v("#")]),s._v(" （2）、Vuex 状态管理")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('import Vue from \'vue\'\nconst state = {\n  test:[]\n  //这里填写参数信息\n}\nconst getters = {\n  test: (state) => {\n    return state.test\n  }\n}\nconst actions = {\n}\nconst mutations = {\n  //这里写你的函数\n  createInfo(state) {\n    Vue.set(state.test, 0, "测试")\n    //由于 Vue 不能检测到对象属性的添加或删除，所以不能用 test[0]="测试"这种方式为参数添加新属性或新值。\n  }\n}\nexport default {\n  state,\n  getters,\n  actions,\n  mutations,\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("h3",{attrs:{id:"（3）、h-264-裸流视频播放"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#（3）、h-264-裸流视频播放"}},[s._v("#")]),s._v(" （3）、H.264 裸流视频播放")]),s._v(" "),n("p",[s._v("用到了 github 上的 "),n("a",{attrs:{href:"https://github.com/ChihChengYang",target:"_blank",rel:"noopener noreferrer"}},[s._v("ChihChengYang"),n("OutboundLink")],1),s._v(" 的 "),n("a",{attrs:{href:"https://github.com/ChihChengYang/wfs.js",target:"_blank",rel:"noopener noreferrer"}},[s._v("wfs.js"),n("OutboundLink")],1),s._v(" 和 "),n("a",{attrs:{href:"https://github.com/ChihChengYang/wfs.js/blob/master/demo/index.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("index.html"),n("OutboundLink")],1)]),s._v(" "),n("h4",{attrs:{id:"_1-在-vue-中可以这样写视频页："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-在-vue-中可以这样写视频页："}},[s._v("#")]),s._v(" 1.在 Vue 中可以这样写视频页：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<template>\n  <div id="Video">\n    <div id="videoBorder">\n      <video id="video1" width="640" height="480" autoplay></video>\n    </div>\n  </div>\n</template>\n<script>  \nimport wfs from \'../service/wfs.js\'\nimport {split,initWebpack,websocketSend, websocket} from \'../service/WebSocket\'\nwindow.onload = function() {\n            if (Wfs.isSupported()) {\n                var video1 = document.getElementById("video1"),\n                    wfs = new Wfs();\n                wfs.attachMedia(video1, \'ch1\');\n            }\n        };\n...\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("h4",{attrs:{id:"_2-然后在你添加到项目中的-wfs-js-文件中更改你的-websocket-连接路径，搜索-onmediaattached-找到创建-websocket-的函数，按以下方式修改："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-然后在你添加到项目中的-wfs-js-文件中更改你的-websocket-连接路径，搜索-onmediaattached-找到创建-websocket-的函数，按以下方式修改："}},[s._v("#")]),s._v(" 2.然后在你添加到项目中的 wfs.js 文件中更改你的 websocket 连接路径，搜索 onMediaAttached 找到创建 websocket 的函数，按以下方式修改：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("key: 'onMediaAttached',\nvalue: function onMediaAttached(data) {\n    if (data.websocketName != undefined) {\n        var url = \"你的连接地址\"\n        var client = new WebSocket(url)\n        //clientSocket = client\n        //(如果你要调用wfs.js中的websocket发送函数，你需要用到这行代码)\n        this.wfs.attachWebsocket(client, data.channelName);\n    } else {\n        console.log('websocketName ERROE!!!');\n    }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("ul",[n("li",[s._v("去掉缓存：注释 onSBUpdateEnd 方法里的 this.mediaSource.endOfStream() 和 that.media.play()这两行，然后在 video 标签里加上 autoplay，去掉 controls。")]),s._v(" "),n("li",[s._v("调整播放速度：将 this.H264_TIMEBASE = 3000 中的数值改为 4500（或其他你觉得合适的数值），有两个地方需要修改。")])]),s._v(" "),n("h4",{attrs:{id:"_3-现在你就可以在浏览器上运行你的项目，看看是否有画面出现。在项目试验过程中可能出现以下问题："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-现在你就可以在浏览器上运行你的项目，看看是否有画面出现。在项目试验过程中可能出现以下问题："}},[s._v("#")]),s._v(" 3.现在你就可以在浏览器上运行你的项目，看看是否有画面出现。在项目试验过程中可能出现以下问题：")]),s._v(" "),n("ol",[n("li",[s._v("花屏：可能是服务端出了问题，可以在服务端写文件进行测试。")]),s._v(" "),n("li",[s._v("可能会出现 mediaError 的打印日志，但并不影响画面播放。")])]),s._v(" "),n("h4",{attrs:{id:"_4-如果你想在外部调用-websocket-发送你的项目所要求的请求视频数据，请接着看。"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-如果你想在外部调用-websocket-发送你的项目所要求的请求视频数据，请接着看。"}},[s._v("#")]),s._v(" 4.如果你想在外部调用 websocket 发送你的项目所要求的请求视频数据，请接着看。")]),s._v(" "),n("p",[s._v("（参考网址： "),n("a",{attrs:{href:"https://blog.csdn.net/weixin_43694639/article/details/88723280",target:"_blank",rel:"noopener noreferrer"}},[s._v("JS如何在外部调用函数内部的函数"),n("OutboundLink")],1),s._v(" ）")]),s._v(" "),n("ul",[n("li",[s._v("下面是接受 H.264 裸流并进行转化的函数：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("key: 'receiveSocketMessage',\nvalue: function receiveSocketMessage(event) {\n    this.buf = new Uint8Array(event.data);\n    var copy = new Uint8Array(this.buf);\n    if (this.mediaType === 'FMp4') {\n        this.wfs.trigger(_events2.default.WEBSOCKET_ATTACHED, { payload: copy });\n    }\n    if (this.mediaType === 'H264Raw') {\n        this.wfs.trigger(_events2.default.H264_DATA_PARSING, { data: copy });\n    }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("ul",[n("li",[s._v("在整个 wfs.js 文件函数的最外层定义变量：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("var sendMsg;\nvar clientSocket;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("在 send 函数中赋值：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("key: 'onWebsocketMessageSending',\nvalue: function onWebsocketMessageSending(i) {\n    clientSocket.send(i)\n    console.log('发送数据：' + i)\n        //this.client.send(i)\n        //this.client.send(JSON.stringify({ type: 2, carNum: 8888 }))\n    sendMsg = onWebsocketMessageSending\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("ul",[n("li",[s._v("在函数最后 export 出去：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("export {\n    sendMsg,\n    clientSocket,\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("ul",[n("li",[s._v("在你想调用的页面 import：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import {sendMsg,clientSocket} from '../service/wfs.js'\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("blockquote",[n("p",[s._v("使用过程中的提问和解答："),n("a",{attrs:{href:"https://github.com/ChihChengYang/wfs.js/issues/31",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/ChihChengYang/wfs.js/issues/31"),n("OutboundLink")],1)])]),s._v(" "),n("h3",{attrs:{id:"（4）、axios-进行-http-请求"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#（4）、axios-进行-http-请求"}},[s._v("#")]),s._v(" （4）、axios 进行 http 请求")]),s._v(" "),n("p",[s._v("1.在 main.js 中添加以下代码：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("//main.js\nimport axios from 'axios'\nVue.prototype.$http = axios;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("2.新建 http.js 文件：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("//http.js\nimport axios from 'axios'\nexport default {\n    install(Vue) {\n        //install方法，向Vue实例中添加一个$http方法\n        Vue.prototype.$http = axios\n        Vue.$http = axios\n    },\n    $http: axios\n}\nexport const Http = axios\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[s._v("3.在要进行 http 请求的页面写请求方法：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("//http请求方法\nrequestData:function(){\n      console.log('http请求,'+'time:'+this.duration);\n      console.log('url:'+url+this.className)\n      this.$http.get(\n        url,\n        {\n          params:{\n            date1:this.duration[0],\n            date2:this.duration[1],\n          }\n        }    \n      )\n        .then(res => {\n          var ans = res.data;\n          console.log('res.data:'+res.data);\n          console.log('value0:'+this.duration);\n          if(res.data.code == '0'){\n            console.log('yes');\n          }else{\n            alert('数据不存在');\n          }\n        })\n        .catch(err => {\n          alert('请求失败！');\n        })\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("blockquote",[n("p",[s._v("P.s. 根据项目需求，具体的请求方法参数会不一样。")])]),s._v(" "),n("h2",{attrs:{id:"四、其他"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四、其他"}},[s._v("#")]),s._v(" 四、其他")]),s._v(" "),n("h3",{attrs:{id:"_1-学到的一些基础知识点："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-学到的一些基础知识点："}},[s._v("#")]),s._v(" 1.学到的一些基础知识点：")]),s._v(" "),n("ul",[n("li",[s._v("CSS 中的 position 定位：relative&absolute")])]),s._v(" "),n("h3",{attrs:{id:"_2-不足与可改进之处："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-不足与可改进之处："}},[s._v("#")]),s._v(" 2.不足与可改进之处：")]),s._v(" "),n("ul",[n("li",[s._v("主界面的车辆车门，用 flex 布局或网格布局会更好")]),s._v(" "),n("li",[s._v("网络界面，选定布局，由大到小来画会更有规律，更好修改")])])])}),[],!1,null,null,null);a.default=t.exports}}]);